import{z as te,d as z,q as ae,bs as G,E as M,s as h,V as de,l as D,a4 as fe,bt as _e,bu as ye,o as C,g as w,J as B,n as x,af as $e,r as O,N as Q,a6 as je,R as U,C as Y,ac as Pe,ad as be,ag as V,ab as Le,X as Ne,aa as Re,e as l,K as H,F as Ge,bv as Be,a7 as me,aE as k,h as A,a as Z,t as ee,aY as Me,c as Ve,w as N,f as R,u as He,bw as Ae,_ as Ce}from"./index-DSC3Ms3s.js";import{e as Ee,M as ke}from"./index-Cl0MKicR.js";import{a as De,u as Te,b as Ke,V as Ue,E as Ye}from"./index-Dx-HpozK.js";import{P as Fe}from"./index-DbxXUXlj.js";import{a as qe,C as Je}from"./index-C7m1n5xG.js";import{u as We,A as Xe,T as Qe}from"./index-CIen7gKh.js";import{c as Ze,h as et}from"./app-CW2kzm5L.js";import{S as tt}from"./keyboard-DIWrcbmK.js";function at(e,a){var t,r;const n=(t=a.span)!=null?t:1,o=(r=a.offset)!=null?r:0,p=Math.min(o,e);return{span:Math.min(p>0?n+o:n,e),offset:p,suffix:"suffix"in a?a.suffix!==!1:!1}}function nt({cols:e,collapsed:a,collapsedRows:t,itemDataList:r}){let n=!1,o=[];function p(i){return Math.ceil(i/e)>t}if(a){let i=0;for(let s=0;s<r.length;s++)r[s].suffix&&(i+=r[s].span,o.push(s));if(!p(i)){let s=0;for(;s<r.length;){const f=r[s];if(!f.suffix){if(i+=f.span,p(i))break;o.push(s)}s++}}n=r.some((s,f)=>!s.suffix&&!o.includes(f))}else o=r.map((i,s)=>s);return{overflow:n,displayIndexList:o}}const rt=z({name:"Grid",props:{cols:{type:[Number,Object],default:24},rowGap:{type:[Number,Object],default:0},colGap:{type:[Number,Object],default:0},collapsed:{type:Boolean,default:!1},collapsedRows:{type:Number,default:1}},setup(e){const{cols:a,rowGap:t,colGap:r,collapsedRows:n,collapsed:o}=ae(e),p=G(a,24),i=G(r,0),s=G(t,0),f=M("grid"),u=h(()=>[f]),y=h(()=>[{gap:`${s.value}px ${i.value}px`,"grid-template-columns":`repeat(${p.value}, minmax(0px, 1fr))`}]),S=de(new Map),j=h(()=>{const $=[];for(const[m,b]of S.entries())$[m]=b;return $}),P=de({overflow:!1,displayIndexList:[],cols:p.value,colGap:i.value});return D(()=>{P.cols=p.value,P.colGap=i.value}),D(()=>{const $=nt({cols:p.value,collapsed:o.value,collapsedRows:n.value,itemDataList:j.value});P.overflow=$.overflow,P.displayIndexList=$.displayIndexList}),fe(_e,P),fe(ye,{collectItemData($,m){S.set($,m)},removeItemData($){S.delete($)}}),{classNames:u,style:y}}});function ot(e,a,t,r,n,o){return C(),w("div",{class:x(e.classNames),style:$e(e.style)},[B(e.$slots,"default")],6)}var F=te(rt,[["render",ot]]),st=Object.defineProperty,lt=Object.defineProperties,it=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,ge=(e,a,t)=>a in e?st(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,pt=(e,a)=>{for(var t in a||(a={}))ct.call(a,t)&&ge(e,t,a[t]);if(ve)for(var t of ve(a))ut.call(a,t)&&ge(e,t,a[t]);return e},dt=(e,a)=>lt(e,it(a));const ft=z({name:"GridItem",props:{span:{type:[Number,Object],default:1},offset:{type:[Number,Object],default:0},suffix:{type:Boolean,default:!1}},setup(e){const a=M("grid-item"),t=O(),{computedIndex:r}=We({itemRef:t,selector:`.${a}`}),n=Q(_e,{overflow:!1,displayIndexList:[],cols:24,colGap:0}),o=Q(ye),p=h(()=>{var m;return(m=n==null?void 0:n.displayIndexList)==null?void 0:m.includes(r.value)}),{span:i,offset:s}=ae(e),f=G(i,1),u=G(s,0),y=h(()=>at(n.cols,dt(pt({},e),{span:f.value,offset:u.value}))),S=h(()=>[a]),j=h(()=>{const{offset:m,span:b}=y.value,{colGap:L}=n;return m>0?{"margin-left":`calc((${`(100% - ${L*(b-1)}px) / ${b}`} * ${m}) + ${L*m}px)`}:{}}),P=h(()=>{const{suffix:m,span:b}=y.value,{cols:L}=n;return m?`${L-b+1}`:`span ${b}`}),$=h(()=>{const{span:m}=y.value;return t.value?[{"grid-column":`${P.value} / span ${m}`},j.value,!p.value||m===0?{display:"none"}:{}]:[]});return D(()=>{r.value!==-1&&(o==null||o.collectItemData(r.value,y.value))}),je(()=>{r.value!==-1&&(o==null||o.removeItemData(r.value))}),{classNames:S,style:$,domRef:t,overflow:h(()=>n.overflow)}}});function mt(e,a,t,r,n,o){return C(),w("div",{ref:"domRef",class:x(e.classNames),style:$e(e.style)},[B(e.$slots,"default",{overflow:e.overflow})],6)}var q=te(ft,[["render",mt]]);const E=Object.assign(F,{Row:U,Col:Y,Item:q,install:(e,a)=>{Pe(e,a);const t=be(a);e.component(t+U.name,U),e.component(t+Y.name,Y),e.component(t+F.name,F),e.component(t+q.name,q)}}),vt=(e,{emit:a})=>{var t,r;const n=O(V(e.paginationProps)&&(t=e.paginationProps.defaultCurrent)!=null?t:1),o=O(V(e.paginationProps)&&(r=e.paginationProps.defaultPageSize)!=null?r:10),p=h(()=>{var u;return V(e.paginationProps)&&(u=e.paginationProps.current)!=null?u:n.value}),i=h(()=>{var u;return V(e.paginationProps)&&(u=e.paginationProps.pageSize)!=null?u:o.value});return{current:p,pageSize:i,handlePageChange:u=>{n.value=u,a("pageChange",u)},handlePageSizeChange:u=>{o.value=u,a("pageSizeChange",u)}}};function he(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!k(e)}var J=z({name:"List",props:{data:{type:Array},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},split:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},paginationProps:{type:Object},gridProps:{type:Object},maxHeight:{type:[String,Number],default:0},bottomOffset:{type:Number,default:0},virtualListProps:{type:Object},scrollbar:{type:[Object,Boolean],default:!0}},emits:{scroll:()=>!0,reachBottom:()=>!0,pageChange:e=>!0,pageSizeChange:e=>!0},setup(e,{emit:a,slots:t}){const{scrollbar:r}=ae(e),n=M("list"),o=Q(Le,void 0),{componentRef:p,elementRef:i}=De("containerRef"),s=h(()=>e.virtualListProps),{displayScrollbar:f,scrollbarProps:u}=Te(r);let y=0;const S=c=>{const{scrollTop:d,scrollHeight:g,offsetHeight:_}=c.target,v=Math.floor(g-(d+_));d>y&&v<=e.bottomOffset&&a("reachBottom"),a("scroll"),y=d};Ne(()=>{if(i.value){const{scrollTop:c,scrollHeight:d,offsetHeight:g}=i.value;d<=c+g&&a("reachBottom")}});const{current:j,pageSize:P,handlePageChange:$,handlePageSizeChange:m}=vt(e,{emit:a}),b=c=>{if(!e.paginationProps)return c;if(e.paginationProps&&c.length>P.value){const d=(j.value-1)*P.value;return c.slice(d,d+P.value)}return c},L=c=>{let d;if(!e.gridProps)return null;const g=b(c);if(e.gridProps.span){const _=[],v=24/e.gridProps.span;for(let I=0;I<g.length;I+=v){let T;const ze=I+v,ie=Math.floor(I/v);_.push(l(E.Row,{key:ie,class:`${n}-row`,gutter:e.gridProps.gutter},he(T=g.slice(I,ze).map((K,ce)=>{var ue;return l(E.Col,{key:`${ie}-${ce}`,class:`${n}-col`,span:(ue=e.gridProps)==null?void 0:ue.span},{default:()=>{var pe;return[k(K)?K:(pe=t.item)==null?void 0:pe.call(t,{item:K,index:ce})]}})}))?T:{default:()=>[T]}))}return _}return l(E.Row,{class:`${n}-row`,gutter:e.gridProps.gutter},he(d=g.map((_,v)=>l(E.Col,H({key:v,class:`${n}-col`},me(e.gridProps,["gutter"])),{default:()=>{var I;return[k(_)?_:(I=t.item)==null?void 0:I.call(t,{item:_,index:v})]}})))?d:{default:()=>[d]})},ne=c=>b(c).map((g,_)=>{var v;return k(g)?g:(v=t.item)==null?void 0:v.call(t,{item:g,index:_})}),Se=()=>{const c=t.default?Be(t.default()):e.data;return c&&c.length>0?e.gridProps?L(c):ne(c):le()},Ie=()=>{if(!e.paginationProps)return null;const c=me(e.paginationProps,["current","pageSize","defaultCurrent","defaultPageSize"]);return l(Fe,H({class:`${n}-pagination`},c,{current:j.value,pageSize:P.value,onChange:$,onPageSizeChange:m}),null)},we=h(()=>[n,`${n}-${e.size}`,{[`${n}-bordered`]:e.bordered,[`${n}-split`]:e.split,[`${n}-hover`]:e.hoverable}]),xe=h(()=>{if(e.maxHeight)return{maxHeight:Re(e.maxHeight)?`${e.maxHeight}px`:e.maxHeight,overflowY:"auto"}}),re=h(()=>[`${n}-content`,{[`${n}-virtual`]:s.value}]),oe=O(),Oe=()=>{var c;const d=b((c=e.data)!=null?c:[]);return d.length?l(Ue,H({ref:oe,class:re.value,data:d},e.virtualListProps,{onScroll:S}),{item:({item:g,index:_})=>{var v;return(v=t.item)==null?void 0:v.call(t,{item:g,index:_})}}):le()},se=()=>t["scroll-loading"]?l("div",{class:[`${n}-item`,`${n}-scroll-loading`]},[t["scroll-loading"]()]):null,le=()=>{var c,d,g,_,v;return t["scroll-loading"]?null:(v=(_=(c=t.empty)==null?void 0:c.call(t))!=null?_:(g=o==null?void 0:(d=o.slots).empty)==null?void 0:g.call(d,{component:"list"}))!=null?v:l(Ye,null,null)};return{virtualListRef:oe,render:()=>{const c=f.value?Ke:"div";return l("div",{class:`${n}-wrapper`},[l(tt,{class:`${n}-spin`,loading:e.loading},{default:()=>[l(c,H({ref:p,class:we.value,style:xe.value},u.value,{onScroll:S}),{default:()=>[l("div",{class:`${n}-content-wrapper`},[t.header&&l("div",{class:`${n}-header`},[t.header()]),s.value&&!e.gridProps?l(Ge,null,[Oe(),se()]):l("div",{role:"list",class:re.value},[Se(),se()]),t.footer&&l("div",{class:`${n}-footer`},[t.footer()])])]}),Ie()]})])}}},methods:{scrollIntoView(e){this.virtualListRef&&this.virtualListRef.scrollTo(e)}},render(){return this.render()}}),W=z({name:"ListItem",props:{actionLayout:{type:String,default:"horizontal"}},setup(e,{slots:a}){const t=M("list-item"),r=()=>{var n;const o=(n=a.actions)==null?void 0:n.call(a);return!o||!o.length?null:l("ul",{class:`${t}-action`},[o.map((p,i)=>l("li",{key:`${t}-action-${i}`},[p]))])};return()=>{var n,o;return l("div",{role:"listitem",class:t},[l("div",{class:`${t}-main`},[(n=a.meta)==null?void 0:n.call(a),l("div",{class:`${t}-content`},[(o=a.default)==null?void 0:o.call(a)]),e.actionLayout==="vertical"&&r()]),e.actionLayout==="horizontal"&&r(),a.extra&&l("div",{class:`${t}-extra`},[a.extra()])])}}});const gt=z({name:"ListItemMeta",props:{title:String,description:String},setup(e,{slots:a}){const t=M("list-item-meta"),r=!!(e.title||e.description||a.title||a.description);return{prefixCls:t,hasContent:r}}});function ht(e,a,t,r,n,o){return C(),w("div",{class:x(e.prefixCls)},[e.$slots.avatar?(C(),w("div",{key:0,class:x(`${e.prefixCls}-avatar`)},[B(e.$slots,"avatar")],2)):A("v-if",!0),e.hasContent?(C(),w("div",{key:1,class:x(`${e.prefixCls}-content`)},[e.$slots.title||e.title?(C(),w("div",{key:0,class:x(`${e.prefixCls}-title`)},[B(e.$slots,"title",{},()=>[Z(ee(e.title),1)])],2)):A("v-if",!0),e.$slots.description||e.description?(C(),w("div",{key:1,class:x(`${e.prefixCls}-description`)},[B(e.$slots,"description",{},()=>[Z(ee(e.description),1)])],2)):A("v-if",!0)],2)):A("v-if",!0)],2)}var X=te(gt,[["render",ht]]);const _t=Object.assign(J,{Item:Object.assign(W,{Meta:X}),install:(e,a)=>{Pe(e,a);const t=be(a);e.component(t+J.name,J),e.component(t+W.name,W),e.component(t+X.name,X)}}),yt={class:"icon-hover"},$t={style:{height:"204px",overflow:"hidden"}},Pt=["alt","src"],bt={style:{display:"flex",alignItems:"center",color:"#1D2129"}},Ct=z({__name:"AppCard",props:{app:{}},setup(e){const a=e,t=Me(),r=()=>{t.push(`/app/detail/${a.app.id}`)};return(n,o)=>{const p=Xe,i=Qe,s=qe,f=Je;return C(),Ve(f,{class:"appCard",hoverable:"",onClick:r},{actions:N(()=>[R("span",yt,[l(He(Ae))])]),cover:N(()=>[R("div",$t,[R("img",{alt:n.app.appName,src:n.app.appIcon,style:{width:"100%",transform:"translateY(-20px)"}},null,8,Pt)])]),default:N(()=>[l(s,{description:n.app.appDesc,title:n.app.appName},{avatar:N(()=>{var u;return[R("div",bt,[l(p,{"image-url":(u=n.app.user)==null?void 0:u.userAvatar,size:24,style:{marginRight:"8px"}},null,8,["image-url"]),l(i,null,{default:N(()=>{var y;return[Z(ee(((y=n.app.user)==null?void 0:y.userName)??"无名"),1)]}),_:1})])]}),_:1},8,["description","title"])]),_:1})}}}),St=Ce(Ct,[["__scopeId","data-v-89edc9f5"]]),It={id:"appHomePage"},wt={class:"searchBar"},xt=z({__name:"AppHomePage",setup(e){const t=O({...{current:1,pageSize:12}}),r=O([]),n=O(0),o=async()=>{var f,u;const i={reviewStatus:Ze.PASS,...t.value},s=await et(i);s.data.code===0?(r.value=((f=s.data.data)==null?void 0:f.records)||[],n.value=((u=s.data.data)==null?void 0:u.total)||0):ke.error("获取数据失败，"+s.data.message)},p=i=>{t.value={...t.value,current:i}};return D(()=>{o()}),(i,s)=>{const f=Ee,u=_t;return C(),w("div",It,[R("div",wt,[l(f,{style:{width:"320px"},placeholder:"快速发现答题应用","button-text":"搜索",size:"large","search-button":""})]),l(u,{class:"list-demo-action-layout","grid-props":{gutter:[20,20],sm:24,md:12,lg:8,xl:6},bordered:!1,data:r.value,"pagination-props":{pageSize:t.value.pageSize,current:t.value.current,total:n.value},onPageChange:p},{item:N(({item:y})=>[l(St,{app:y},null,8,["app"])]),_:1},8,["data","pagination-props"])])}}}),Vt=Ce(xt,[["__scopeId","data-v-21888e52"]]);export{Vt as default};
