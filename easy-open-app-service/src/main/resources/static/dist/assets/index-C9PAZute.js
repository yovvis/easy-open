import{r as f,X as Be,aC as Le,b4 as Ve,d as Pe,E as Te,s as g,aa as X,x as Fe,e as D,ac as Me,ad as De,b5 as He,b6 as Ke,aL as U,aM as ce,b7 as We,B as Ye,I as Ge,b8 as Ue,b9 as Re,ae as Xe,ba as qe,q as Je,bb as Qe,bc as xe,bd as Ze,aO as eo,y as ye,H as V,ak as pe,a9 as be,be as oo,z as to,b as M,o as d,c as z,w as I,bf as no,bg as x,g as E,K as Z,bh as ge,n as S,af as ee,bi as oe,h as y,f as te,aQ as Ce,J as ne,a as le,t as ae,bj as lo,bk as se,a7 as ao,bl as we,W as so}from"./index-DSC3Ms3s.js";import{a as io,u as ro,d as uo}from"./index-Cl0MKicR.js";import{K as co}from"./keyboard-DIWrcbmK.js";const Mo=e=>{const o={},t=f([]),r=()=>{if(o.value){const s=Ve(o.value,e);(s.length!==t.value.length||s.toString()!==t.value.toString())&&(t.value=s)}};return Be(()=>r()),Le(()=>r()),{children:o,components:t}};var ie=Pe({name:"Divider",props:{direction:{type:String,default:"horizontal"},orientation:{type:String,default:"center"},type:{type:String},size:{type:Number},margin:{type:[Number,String]}},setup(e,{slots:o}){const t=Te("divider"),r=g(()=>e.direction==="horizontal"),s=g(()=>{const n={};if(e.size&&(n[r.value?"border-bottom-width":"border-left-width"]=X(e.size)?`${e.size}px`:e.size),e.type&&(n[r.value?"border-bottom-style":"border-left-style"]=e.type),!Fe(e.margin)){const a=X(e.margin)?`${e.margin}px`:e.margin;n.margin=r.value?`${a} 0`:`0 ${a}`}return n});return()=>{var n;const a=(n=o.default)==null?void 0:n.call(o),m=[t,`${t}-${e.direction}`,{[`${t}-with-text`]:a}];return D("div",{role:"separator",class:m,style:s.value},[a&&e.direction==="horizontal"&&D("span",{class:[`${t}-text`,`${t}-text-${e.orientation}`]},[a])])}}});const Do=Object.assign(ie,{install:(e,o)=>{Me(e,o);const t=De(o);e.component(t+ie.name,ie)}}),fo=e=>{const o=f(!1),t={overflow:"",width:"",boxSizing:""};return{setOverflowHidden:()=>{if(e.value){const n=e.value;if(!o.value&&n.style.overflow!=="hidden"){const a=He(n);(a>0||Ke(n))&&(t.overflow=n.style.overflow,t.width=n.style.width,t.boxSizing=n.style.boxSizing,n.style.overflow="hidden",n.style.width=`${n.offsetWidth-a}px`,n.style.boxSizing="border-box",o.value=!0)}}},resetOverflow:()=>{if(e.value&&o.value){const n=e.value;n.style.overflow=t.overflow,n.style.width=t.width,n.style.boxSizing=t.boxSizing,o.value=!1}}}},mo=({modalRef:e,wrapperRef:o,draggable:t,alignCenter:r})=>{const s=f(!1),n=f([0,0]),a=f([0,0]),m=f(),p=f([0,0]),l=f([0,0]),c=()=>{var u,$,B;if(o.value&&e.value){const{top:h,left:k}=o.value.getBoundingClientRect(),{clientWidth:F,clientHeight:H}=o.value,{top:N,left:K,width:j,height:A}=e.value.getBoundingClientRect(),P=r.value?0:(u=e.value)==null?void 0:u.offsetTop,b=K-k,W=N-h-P;(b!==(($=a.value)==null?void 0:$[0])||W!==((B=a.value)==null?void 0:B[1]))&&(a.value=[b,W]);const L=F>j?F-j:0,Y=H>A?H-A-P:0;(L!==l.value[0]||Y!==l.value[1])&&(l.value=[L,Y]),P&&(p.value=[0,0-P])}},v=u=>{t.value&&(u.preventDefault(),s.value=!0,c(),n.value=[u.x,u.y],U(window,"mousemove",C),U(window,"mouseup",w),U(window,"contextmenu",w))},C=u=>{if(s.value){const $=u.x-n.value[0],B=u.y-n.value[1];let h=a.value[0]+$,k=a.value[1]+B;h<p.value[0]&&(h=p.value[0]),h>l.value[0]&&(h=l.value[0]),k<p.value[1]&&(k=p.value[1]),k>l.value[1]&&(k=l.value[1]),m.value=[h,k]}},w=()=>{s.value=!1,ce(window,"mousemove",C),ce(window,"mouseup",w)};return{position:m,handleMoveDown:v}};var vo=Object.defineProperty,he=Object.getOwnPropertySymbols,yo=Object.prototype.hasOwnProperty,po=Object.prototype.propertyIsEnumerable,ke=(e,o,t)=>o in e?vo(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,bo=(e,o)=>{for(var t in o||(o={}))yo.call(o,t)&&ke(e,t,o[t]);if(he)for(var t of he(o))po.call(o,t)&&ke(e,t,o[t]);return e},go=Pe({name:"Modal",components:{ClientOnly:We,ArcoButton:Ye,IconHover:io,IconClose:Ge,IconInfoCircleFill:Ue,IconCheckCircleFill:Re,IconExclamationCircleFill:Xe,IconCloseCircleFill:qe},inheritAttrs:!1,props:{visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},width:{type:[Number,String]},top:{type:[Number,String]},mask:{type:Boolean,default:!0},title:{type:String},titleAlign:{type:String,default:"center"},alignCenter:{type:Boolean,default:!0},unmountOnClose:Boolean,maskClosable:{type:Boolean,default:!0},hideCancel:{type:Boolean,default:!1},simple:{type:Boolean,default:e=>e.notice},closable:{type:Boolean,default:!0},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},footer:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},popupContainer:{type:[String,Object],default:"body"},maskStyle:{type:Object},modalClass:{type:[String,Array]},modalStyle:{type:Object},onBeforeOk:{type:Function},onBeforeCancel:{type:Function},escToClose:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},maskAnimationName:{type:String,default:e=>e.fullscreen?"fade-in-standard":"fade-modal"},modalAnimationName:{type:String,default:e=>e.fullscreen?"zoom-in":"zoom-modal"},bodyClass:{type:[String,Array]},bodyStyle:{type:[String,Object,Array]},messageType:{type:String},hideTitle:{type:Boolean,default:!1}},emits:{"update:visible":e=>!0,ok:e=>!0,cancel:e=>!0,open:()=>!0,close:()=>!0,beforeOpen:()=>!0,beforeClose:()=>!0},setup(e,{emit:o}){const{fullscreen:t,popupContainer:r,alignCenter:s}=Je(e),n=Te("modal"),{t:a}=ro(),m=f(),p=f(),l=f(e.defaultVisible),c=g(()=>{var i;return(i=e.visible)!=null?i:l.value}),v=f(!1),C=g(()=>e.okLoading||v.value),w=g(()=>e.draggable&&!e.fullscreen),{teleportContainer:u,containerRef:$}=Qe({popupContainer:r,visible:c}),B=f(c.value),h=g(()=>e.okText||a("modal.okText")),k=g(()=>e.cancelText||a("modal.cancelText")),{zIndex:F,isLastDialog:H}=xe("dialog",{visible:c});let N=!1;const K=i=>{e.escToClose&&i.key===co.ESC&&H()&&q(i)},j=()=>{e.escToClose&&!N&&(N=!0,U(document.documentElement,"keydown",K))},A=()=>{N=!1,ce(document.documentElement,"keydown",K)};let P=0;const{position:b,handleMoveDown:W}=mo({wrapperRef:m,modalRef:p,draggable:w,alignCenter:s}),L=()=>{P++,v.value&&(v.value=!1),l.value=!1,o("update:visible",!1)},Y=async i=>{const O=P,G=await new Promise(async Q=>{var me;if(V(e.onBeforeOk)){let T=e.onBeforeOk((ve=!0)=>Q(ve));if((pe(T)||!be(T))&&(v.value=!0),pe(T))try{T=(me=await T)!=null?me:!0}catch{T=!1}be(T)&&Q(T)}else Q(!0)});O===P&&(G?(o("ok",i),L()):v.value&&(v.value=!1))},q=i=>{var O;let G=!0;V(e.onBeforeCancel)&&(G=(O=e.onBeforeCancel())!=null?O:!1),G&&(o("cancel",i),L())},J=f(!1),ze=i=>{i.target===m.value&&(J.value=!0)},Ee=i=>{e.mask&&e.maskClosable&&J.value&&q(i)},_e=()=>{c.value&&(!oo(m.value,document.activeElement)&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),o("open"))},Ie=()=>{c.value||(w.value&&(b.value=void 0),B.value=!1,fe(),o("close"))},{setOverflowHidden:de,resetOverflow:fe}=fo($);Be(()=>{$.value=Ze(e.popupContainer),c.value&&(de(),e.escToClose&&j())}),eo(()=>{fe(),A()}),ye(c,i=>{l.value!==i&&(l.value=i),i?(o("beforeOpen"),B.value=!0,J.value=!1,de(),j()):(o("beforeClose"),A())}),ye(t,()=>{b.value&&(b.value=void 0)});const Ne=g(()=>[`${n}-wrapper`,{[`${n}-wrapper-align-center`]:e.alignCenter&&!e.fullscreen,[`${n}-wrapper-moved`]:!!b.value}]),je=g(()=>[`${n}`,e.modalClass,{[`${n}-simple`]:e.simple,[`${n}-draggable`]:w.value,[`${n}-fullscreen`]:e.fullscreen}]),Ae=g(()=>{var i;const O=bo({},(i=e.modalStyle)!=null?i:{});return e.width&&!e.fullscreen&&(O.width=X(e.width)?`${e.width}px`:e.width),!e.alignCenter&&e.top&&(O.top=X(e.top)?`${e.top}px`:e.top),b.value&&(O.transform=`translate(${b.value[0]}px, ${b.value[1]}px)`),O});return{prefixCls:n,mounted:B,computedVisible:c,containerRef:$,wrapperRef:m,mergedModalStyle:Ae,okDisplayText:h,cancelDisplayText:k,zIndex:F,handleOk:Y,handleCancel:q,handleMaskClick:Ee,handleMaskMouseDown:ze,handleOpen:_e,handleClose:Ie,mergedOkLoading:C,modalRef:p,wrapperCls:Ne,modalCls:je,teleportContainer:u,handleMoveDown:W}}});function Co(e,o,t,r,s,n){const a=M("icon-info-circle-fill"),m=M("icon-check-circle-fill"),p=M("icon-exclamation-circle-fill"),l=M("icon-close-circle-fill"),c=M("icon-close"),v=M("icon-hover"),C=M("arco-button"),w=M("client-only");return d(),z(w,null,{default:I(()=>[(d(),z(no,{to:e.teleportContainer,disabled:!e.renderToBody},[!e.unmountOnClose||e.computedVisible||e.mounted?x((d(),E("div",Z({key:0,class:`${e.prefixCls}-container`,style:{zIndex:e.zIndex}},e.$attrs),[D(ge,{name:e.maskAnimationName,appear:""},{default:I(()=>[e.mask?x((d(),E("div",{key:0,ref:"maskRef",class:S(`${e.prefixCls}-mask`),style:ee(e.maskStyle)},null,6)),[[oe,e.computedVisible]]):y("v-if",!0)]),_:1},8,["name"]),te("div",{ref:"wrapperRef",class:S(e.wrapperCls),onClick:o[2]||(o[2]=Ce((...u)=>e.handleMaskClick&&e.handleMaskClick(...u),["self"])),onMousedown:o[3]||(o[3]=Ce((...u)=>e.handleMaskMouseDown&&e.handleMaskMouseDown(...u),["self"]))},[D(ge,{name:e.modalAnimationName,appear:"",onAfterEnter:e.handleOpen,onAfterLeave:e.handleClose},{default:I(()=>[x(te("div",{ref:"modalRef",class:S(e.modalCls),style:ee(e.mergedModalStyle)},[!e.hideTitle&&(e.$slots.title||e.title||e.closable)?(d(),E("div",{key:0,class:S(`${e.prefixCls}-header`),onMousedown:o[1]||(o[1]=(...u)=>e.handleMoveDown&&e.handleMoveDown(...u))},[e.$slots.title||e.title?(d(),E("div",{key:0,class:S([`${e.prefixCls}-title`,`${e.prefixCls}-title-align-${e.titleAlign}`])},[e.messageType?(d(),E("div",{key:0,class:S(`${e.prefixCls}-title-icon`)},[e.messageType==="info"?(d(),z(a,{key:0})):y("v-if",!0),e.messageType==="success"?(d(),z(m,{key:1})):y("v-if",!0),e.messageType==="warning"?(d(),z(p,{key:2})):y("v-if",!0),e.messageType==="error"?(d(),z(l,{key:3})):y("v-if",!0)],2)):y("v-if",!0),ne(e.$slots,"title",{},()=>[le(ae(e.title),1)])],2)):y("v-if",!0),!e.simple&&e.closable?(d(),E("div",{key:1,tabindex:"-1",role:"button","aria-label":"Close",class:S(`${e.prefixCls}-close-btn`),onClick:o[0]||(o[0]=(...u)=>e.handleCancel&&e.handleCancel(...u))},[D(v,null,{default:I(()=>[D(c)]),_:1})],2)):y("v-if",!0)],34)):y("v-if",!0),te("div",{class:S([`${e.prefixCls}-body`,e.bodyClass]),style:ee(e.bodyStyle)},[ne(e.$slots,"default")],6),e.footer?(d(),E("div",{key:1,class:S(`${e.prefixCls}-footer`)},[ne(e.$slots,"footer",{},()=>[e.hideCancel?y("v-if",!0):(d(),z(C,Z({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:I(()=>[le(ae(e.cancelDisplayText),1)]),_:1},16,["onClick"])),D(C,Z({type:"primary"},e.okButtonProps,{loading:e.mergedOkLoading,onClick:e.handleOk}),{default:I(()=>[le(ae(e.okDisplayText),1)]),_:1},16,["loading","onClick"])])],2)):y("v-if",!0)],6),[[oe,e.computedVisible]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],34)],16)),[[oe,e.computedVisible||e.mounted]]):y("v-if",!0)],8,["to","disabled"]))]),_:3})}var R=to(go,[["render",Co]]),wo=Object.defineProperty,ho=Object.defineProperties,ko=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,Oo=Object.prototype.hasOwnProperty,So=Object.prototype.propertyIsEnumerable,Se=(e,o,t)=>o in e?wo(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,_=(e,o)=>{for(var t in o||(o={}))Oo.call(o,t)&&Se(e,t,o[t]);if(Oe)for(var t of Oe(o))So.call(o,t)&&Se(e,t,o[t]);return e},$o=(e,o)=>ho(e,ko(o));const re=(e,o)=>{let t=lo("modal");const r=()=>{l.component&&(l.component.props.visible=!1),V(e.onOk)&&e.onOk()},s=()=>{l.component&&(l.component.props.visible=!1),V(e.onCancel)&&e.onCancel()},n=async()=>{await so(),t&&(we(null,t),document.body.removeChild(t)),t=null,V(e.onClose)&&e.onClose()},a=()=>{l.component&&(l.component.props.visible=!1)},m=c=>{l.component&&Object.entries(c).forEach(([v,C])=>{l.component.props[v]=C})},l=D(R,_(_(_({},{visible:!0,renderToBody:!1,unmountOnClose:!0,onOk:r,onCancel:s,onClose:n}),ao(e,["content","title","footer","visible","unmountOnClose","onOk","onCancel","onClose"])),{footer:typeof e.footer=="boolean"?e.footer:void 0}),{default:se(e.content),title:se(e.title),footer:typeof e.footer!="boolean"?se(e.footer):void 0});return(o??$e._context)&&(l.appContext=o??$e._context),we(l,t),document.body.appendChild(t),{close:a,update:m}},ue=_({open:re,confirm:(e,o)=>{const t=_({simple:!0,messageType:"warning"},e);return re(t,o)}},uo.reduce((e,o)=>(e[o]=(t,r)=>{const s=_({simple:!0,hideCancel:!0,messageType:o},t);return re(s,r)},e),{})),$e=Object.assign(R,$o(_({},ue),{install:(e,o)=>{Me(e,o);const t=De(o);e.component(t+R.name,R);const r={};for(const s of Object.keys(ue))r[s]=(n,a=e._context)=>ue[s](n,a);e.config.globalProperties.$modal=r},_context:null}));export{Do as D,$e as M,Mo as u};
