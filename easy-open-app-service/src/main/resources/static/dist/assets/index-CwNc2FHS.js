import{z as ne,d as Z,E as re,o as y,g as P,n as p,t as ue,h as w,J as F,P as Je,Q as Qe,b as L,f as z,e as O,T as Oe,K as de,aE as _e,O as xe,q,s as f,F as Re,i as eo,c as te,w as H,r as D,l as ye,aL as fe,aM as me,y as ke,W as je,aB as oo,bF as to,aI as We,I as no,$ as we,V as G,bc as ro,bG as ao,aO as lo,bH as ee,bI as so,bJ as io,bK as uo,bL as vo,bM as co,bN as po,bg as fo,bi as mo,bh as Be,af as ge,a1 as go,aQ as yo,bf as wo,x as X,aa as Ae,av as bo,N as Co,a9 as Io,a7 as Po,bO as ho,a2 as Ge,M as $o,a4 as So,ac as ko,ad as Lo}from"./index-DSC3Ms3s.js";import{K as oe}from"./keyboard-DIWrcbmK.js";import{u as Ke}from"./index-Cl0MKicR.js";const Oo=Z({name:"ImageFooter",props:{title:{type:String},description:{type:String}},setup(){return{prefixCls:re("image-footer")}}}),Bo=["title"],Ao=["title"];function Eo(e,o,t,a,r,d){return y(),P("div",{class:p(e.prefixCls)},[e.title||e.description?(y(),P("div",{key:0,class:p(`${e.prefixCls}-caption`)},[e.title?(y(),P("div",{key:0,class:p(`${e.prefixCls}-caption-title`),title:e.title},ue(e.title),11,Bo)):w("v-if",!0),e.description?(y(),P("div",{key:1,class:p(`${e.prefixCls}-caption-description`),title:e.description},ue(e.description),11,Ao)):w("v-if",!0)],2)):w("v-if",!0),e.$slots.extra?(y(),P("div",{key:1,class:p(`${e.prefixCls}-extra`)},[F(e.$slots,"extra")],2)):w("v-if",!0)],2)}var zo=ne(Oo,[["render",Eo]]);const To=Z({name:"ImagePreviewArrow",components:{IconLeft:Je,IconRight:Qe},props:{onPrev:{type:Function},onNext:{type:Function}},setup(){return{prefixCls:re("image-preview-arrow")}}});function No(e,o,t,a,r,d){const i=L("icon-left"),v=L("icon-right");return y(),P("div",{class:p(e.prefixCls)},[z("div",{class:p([`${e.prefixCls}-left`,{[`${e.prefixCls}-disabled`]:!e.onPrev}]),onClick:o[0]||(o[0]=n=>{n.preventDefault(),e.onPrev&&e.onPrev()})},[O(i)],2),z("div",{class:p([`${e.prefixCls}-right`,{[`${e.prefixCls}-disabled`]:!e.onNext}]),onClick:o[1]||(o[1]=n=>{n.preventDefault(),e.onNext&&e.onNext()})},[O(v)],2)],2)}var Vo=ne(To,[["render",No]]);function Mo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!_e(e)}var Se=Z({name:"ImagePreviewAction",components:{Tooltip:Oe},inheritAttrs:!1,props:{name:{type:String},disabled:{type:Boolean}},setup(e,{slots:o,attrs:t}){const a=re("image-preview-toolbar-action");return()=>{var r;const{name:d,disabled:i}=e,v=(r=o.default)==null?void 0:r.call(o);if(!v||!v.length)return null;const n=O("div",de({class:[`${a}`,{[`${a}-disabled`]:i}],onMousedown:m=>{m.preventDefault()}},t),[O("span",{class:`${a}-content`},[v])]);return d?O(Oe,{class:`${a}-tooltip`,content:d},Mo(n)?n:{default:()=>[n]}):n}}}),Fo=Z({name:"ImagePreviewToolbar",components:{RenderFunction:xe,PreviewAction:Se},props:{actions:{type:Array,default:()=>[]},actionsLayout:{type:Array,default:()=>[]}},setup(e){const{actions:o,actionsLayout:t}=q(e),a=re("image-preview-toolbar"),r=f(()=>{const d=new Set(t.value),i=n=>d.has(n.key);return o.value.filter(i).sort((n,m)=>{const l=t.value.indexOf(n.key),b=t.value.indexOf(m.key);return l>b?1:-1})});return{prefixCls:a,resultActions:r}}});function Do(e,o,t,a,r,d){const i=L("RenderFunction"),v=L("PreviewAction");return y(),P("div",{class:p(e.prefixCls)},[(y(!0),P(Re,null,eo(e.resultActions,n=>(y(),te(v,{key:n.key,name:n.name,disabled:n.disabled,onClick:n.onClick},{default:H(()=>[O(i,{"render-func":n.content},null,8,["render-func"])]),_:2},1032,["name","disabled","onClick"]))),128)),F(e.$slots,"default")],2)}var Ro=ne(Fo,[["render",Do]]);function Ue(e){const o=D("beforeLoad"),t=f(()=>o.value==="beforeLoad"),a=f(()=>o.value==="loading"),r=f(()=>o.value==="error"),d=f(()=>o.value==="loaded");return{status:o,isBeforeLoad:t,isLoading:a,isError:r,isLoaded:d,setLoadStatus:i=>{o.value=i}}}function jo(e,o,t,a,r){let d=t,i=a;return t&&(e.width>o.width?d=0:(o.left>e.left&&(d-=Math.abs(e.left-o.left)/r),o.right<e.right&&(d+=Math.abs(e.right-o.right)/r))),a&&(e.height>o.height?i=0:(o.top>e.top&&(i-=Math.abs(e.top-o.top)/r),o.bottom<e.bottom&&(i+=Math.abs(e.bottom-o.bottom)/r))),[d,i]}function Wo(e){const{wrapperEl:o,imageEl:t,scale:a}=q(e),r=D([0,0]),d=D(!1);let i=0,v=0,n=[0,0];const m=()=>{if(!o.value||!t.value)return;const s=o.value.getBoundingClientRect(),N=t.value.getBoundingClientRect(),[g,I]=jo(s,N,r.value[0],r.value[1],a.value);(g!==r.value[0]||I!==r.value[1])&&(r.value=[g,I])},l=s=>{s.preventDefault&&s.preventDefault();const N=n[0]+(s.pageX-i)/a.value,g=n[1]+(s.pageY-v)/a.value;r.value=[N,g]},b=s=>{s.preventDefault&&s.preventDefault(),d.value=!1,m(),S()},h=s=>{s.target===s.currentTarget&&(s.preventDefault&&s.preventDefault(),d.value=!0,i=s.pageX,v=s.pageY,n=[...r.value],fe(window,"mousemove",l,!1),fe(window,"mouseup",b,!1))};function S(){me(window,"mousemove",l,!1),me(window,"mouseup",b,!1)}return ye(s=>{t.value&&fe(t.value,"mousedown",h),s(()=>{t.value&&me(t.value,"mousedown",h),S()})}),ke([a],()=>{je(()=>m())}),{translate:r,moving:d,resetTranslate(){r.value=[0,0]}}}function Go(e){const{container:o,hidden:t}=q(e);let a=!1,r={};const d=n=>n.tagName==="BODY"?window.innerWidth-(document.body.clientWidth||document.documentElement.clientWidth):n.offsetWidth-n.clientWidth,i=()=>{if(o.value&&o.value.style.overflow!=="hidden"){const n=o.value.style;a=!0;const m=d(o.value);m&&(r.width=n.width,o.value.style.width=`calc(${o.value.style.width||"100%"} - ${m}px)`),r.overflow=n.overflow,o.value.style.overflow="hidden"}},v=()=>{if(o.value&&a){const n=r;Object.keys(n).forEach(m=>{o.value.style[m]=n[m]})}a=!1,r={}};return ye(n=>{t.value?i():v(),n(()=>{v()})}),[v,i]}function Ko(e,o){const{popupContainer:t}=q(o);return f(()=>(oo(t.value)?to(t.value):t.value)||e)}const T=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].map(e=>+(e/100).toFixed(2)),Ye=T[0],Xe=T[T.length-1];function Uo(e=1,o="zoomIn"){let t=T.indexOf(e);return t===-1&&(t=Xo(e)),o==="zoomIn"?t===T.length-1?e:T[t+1]:t===0?e:T[t-1]}function Yo(e,o=1.1,t="zoomIn"){const a=t==="zoomIn"?o:1/o,r=Number.parseFloat((e*a).toFixed(3));return Math.min(Xe,Math.max(Ye,r))}function Xo(e){let o=T.length-1;for(let t=0;t<T.length;t++){const a=T[t];if(e===a){o=t;break}if(e<a){const r=T[t-1];o=r===void 0||Math.abs(r-e)<=Math.abs(a-e)?t-1:t;break}}return o}var Ho=Object.defineProperty,Ee=Object.getOwnPropertySymbols,Zo=Object.prototype.hasOwnProperty,qo=Object.prototype.propertyIsEnumerable,ze=(e,o,t)=>o in e?Ho(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Jo=(e,o)=>{for(var t in o||(o={}))Zo.call(o,t)&&ze(e,t,o[t]);if(Ee)for(var t of Ee(o))qo.call(o,t)&&ze(e,t,o[t]);return e};const Pe=90;var Qo=Z({name:"ImagePreview",components:{PreviewArrow:Vo,PreviewToolbar:Ro,IconLoading:We,IconClose:no},props:{renderToBody:{type:Boolean,default:!0},src:{type:String},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},actionsLayout:{type:Array,default:()=>["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize"]},popupContainer:{type:[Object,String]},inGroup:{type:Boolean,default:!1},groupArrowProps:{type:Object,default:()=>({})},escToClose:{type:Boolean,default:!0},wheelZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},defaultScale:{type:Number,default:1},zoomRate:{type:Number,default:1.1}},emits:["close","update:visible"],setup(e,{emit:o}){const{t}=Ke(),{src:a,popupContainer:r,visible:d,defaultVisible:i,maskClosable:v,actionsLayout:n,defaultScale:m,zoomRate:l}=q(e),b=D(),h=D(),S=re("image-preview"),[s,N]=we(i.value,G({value:d})),g=f(()=>[S,{[`${S}-hide`]:!s.value}]),I=Ko(document.body,G({popupContainer:r})),R=f(()=>I.value===document.body),{zIndex:K}=ro("dialog",{visible:s}),J=f(()=>{const c=R.value?{zIndex:K.value,position:"fixed"}:{zIndex:"inherit",position:"absolute"};return Jo({},c)}),{isLoading:Q,isLoaded:V,setLoadStatus:A}=Ue(),M=D(0),$=D(m.value),{translate:u,moving:C,resetTranslate:j}=Wo(G({wrapperEl:b,imageEl:h,visible:s,scale:$})),E=D(!1);let B=null;const k=()=>{!E.value&&(E.value=!0),B&&clearTimeout(B),B=setTimeout(()=>{E.value=!1},1e3)};Go(G({container:I,hidden:s}));function U(){M.value=0,$.value=m.value,j()}const ae=c=>n.value.includes(c),ve=c=>{switch(c.stopPropagation(),c.preventDefault(),c.key){case oe.ESC:e.escToClose&&x();break;case oe.ARROW_LEFT:e.groupArrowProps.onPrev&&e.groupArrowProps.onPrev();break;case oe.ARROW_RIGHT:e.groupArrowProps.onNext&&e.groupArrowProps.onNext();break;case oe.ARROW_UP:ae("zoomIn")&&pe("zoomIn");break;case oe.ARROW_DOWN:ae("zoomOut")&&pe("zoomOut");break;case oe.SPACE:ae("originalSize")&&Y(1);break}},be=ao(c=>{if(c.preventDefault(),c.stopPropagation(),!e.wheelZoom)return;const se=(c.deltaY||c.deltaX)>0?"zoomOut":"zoomIn",Ie=Yo($.value,l.value,se);Y(Ie)});let _=!1;const Ce=()=>{je(()=>{var c;(c=b==null?void 0:b.value)==null||c.focus()}),e.keyboard&&!_&&(_=!0,fe(I.value,"keydown",ve))},le=()=>{_&&(_=!1,me(I.value,"keydown",ve))};ke([a,s],()=>{s.value?(U(),A("loading"),Ce()):le()});function x(){s.value&&(o("close"),o("update:visible",!1),N(!1))}function ce(c){var W;(W=b==null?void 0:b.value)==null||W.focus(),v.value&&c.target===c.currentTarget&&x()}function Y(c){$.value!==c&&($.value=c,k())}function Ze(){const c=b.value.getBoundingClientRect(),W=h.value.getBoundingClientRect(),se=c.height/(W.height/$.value),Ie=c.width/(W.width/$.value),qe=Math.max(se,Ie);Y(qe)}function Le(c){const se=c==="clockwise"?(M.value+Pe)%360:M.value===0?360-Pe:M.value-Pe;M.value=se}function pe(c){const W=Uo($.value,c);Y(W)}return lo(()=>{le()}),{prefixCls:S,classNames:g,container:I,wrapperStyles:J,scale:$,translate:u,rotate:M,moving:C,mergedVisible:s,isLoading:Q,isLoaded:V,scaleValueVisible:E,refWrapper:b,refImage:h,onWheel:be,onMaskClick:ce,onCloseClick:x,onImgLoad(){A("loaded")},onImgError(){A("error")},actions:f(()=>[{key:"fullScreen",name:t("imagePreview.fullScreen"),content:()=>ee(so),onClick:()=>Ze()},{key:"rotateRight",name:t("imagePreview.rotateRight"),content:()=>ee(io),onClick:()=>Le("clockwise")},{key:"rotateLeft",name:t("imagePreview.rotateLeft"),content:()=>ee(uo),onClick:()=>Le("counterclockwise")},{key:"zoomIn",name:t("imagePreview.zoomIn"),content:()=>ee(vo),onClick:()=>pe("zoomIn"),disabled:$.value===Xe},{key:"zoomOut",name:t("imagePreview.zoomOut"),content:()=>ee(co),onClick:()=>pe("zoomOut"),disabled:$.value===Ye},{key:"originalSize",name:t("imagePreview.originalSize"),content:()=>ee(po),onClick:()=>Y(1)}])}}});const _o=["src"];function xo(e,o,t,a,r,d){const i=L("IconLoading"),v=L("PreviewToolbar"),n=L("IconClose"),m=L("PreviewArrow");return y(),te(wo,{to:e.container,disabled:!e.renderToBody},[z("div",{class:p(e.classNames),style:ge(e.wrapperStyles)},[O(Be,{name:"image-fade",onBeforeEnter:o[0]||(o[0]=l=>l.parentElement&&(l.parentElement.style.display="block")),onAfterLeave:o[1]||(o[1]=l=>l.parentElement&&(l.parentElement.style.display=""))},{default:H(()=>[fo(z("div",{class:p(`${e.prefixCls}-mask`)},null,2),[[mo,e.mergedVisible]])]),_:1}),e.mergedVisible?(y(),P("div",{key:0,ref:"refWrapper",tabindex:"0",class:p(`${e.prefixCls}-wrapper`),onClick:o[6]||(o[6]=(...l)=>e.onMaskClick&&e.onMaskClick(...l)),onWheel:o[7]||(o[7]=yo((...l)=>e.onWheel&&e.onWheel(...l),["prevent","stop"]))},[w(" img "),z("div",{class:p(`${e.prefixCls}-img-container`),style:ge({transform:`scale(${e.scale}, ${e.scale})`}),onClick:o[4]||(o[4]=(...l)=>e.onMaskClick&&e.onMaskClick(...l))},[(y(),P("img",{ref:"refImage",key:e.src,src:e.src,class:p([`${e.prefixCls}-img`,{[`${e.prefixCls}-img-moving`]:e.moving}]),style:ge({transform:`translate(${e.translate[0]}px, ${e.translate[1]}px) rotate(${e.rotate}deg)`}),onLoad:o[2]||(o[2]=(...l)=>e.onImgLoad&&e.onImgLoad(...l)),onError:o[3]||(o[3]=(...l)=>e.onImgError&&e.onImgError(...l))},null,46,_o))],6),w(" loading "),e.isLoading?(y(),P("div",{key:0,class:p(`${e.prefixCls}-loading`)},[O(i)],2)):w("v-if",!0),w(" scale value "),O(Be,{name:"image-fade"},{default:H(()=>[e.scaleValueVisible?(y(),P("div",{key:0,class:p(`${e.prefixCls}-scale-value`)},ue((e.scale*100).toFixed(0))+"% ",3)):w("v-if",!0)]),_:1}),w(" toolbar "),e.isLoaded&&e.actionsLayout.length?(y(),te(v,{key:1,actions:e.actions,"actions-layout":e.actionsLayout},{default:H(()=>[F(e.$slots,"actions")]),_:3},8,["actions","actions-layout"])):w("v-if",!0),w(" close btn "),e.closable?(y(),P("div",{key:2,class:p(`${e.prefixCls}-close-btn`),onClick:o[5]||(o[5]=(...l)=>e.onCloseClick&&e.onCloseClick(...l))},[O(n)],2)):w("v-if",!0),w(" group arrow "),e.inGroup?(y(),te(m,go(de({key:3},e.groupArrowProps)),null,16)):w("v-if",!0)],34)):w("v-if",!0)],6)],8,["to","disabled"])}var ie=ne(Qo,[["render",xo]]);function Te(e){if(X(e))return;if(!Ae(e)&&/^\d+(%)$/.test(e))return e;const o=parseInt(e,10);return Ae(o)?`${o}px`:void 0}const He=Symbol("PreviewGroupInjectionKey");var et=Object.defineProperty,Ne=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,Ve=(e,o,t)=>o in e?et(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Me=(e,o)=>{for(var t in o||(o={}))ot.call(o,t)&&Ve(e,t,o[t]);if(Ne)for(var t of Ne(o))tt.call(o,t)&&Ve(e,t,o[t]);return e};let nt=0;const rt=Z({name:"Image",components:{IconImageClose:bo,IconLoading:We,ImageFooter:zo,ImagePreview:ie},inheritAttrs:!1,props:{renderToBody:{type:Boolean,default:!0},src:{type:String},width:{type:[String,Number]},height:{type:[String,Number]},title:{type:String},description:{type:String},fit:{type:String},alt:{type:String},hideFooter:{type:[Boolean,String],default:!1},footerPosition:{type:String,default:"inner"},showLoader:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},previewVisible:{type:Boolean,default:void 0},defaultPreviewVisible:{type:Boolean,default:!1},previewProps:{type:Object},footerClass:{type:[String,Array,Object]}},emits:["preview-visible-change","update:previewVisible"],setup(e,{attrs:o,slots:t,emit:a}){const{t:r}=Ke(),{height:d,width:i,hideFooter:v,title:n,description:m,src:l,footerPosition:b,defaultPreviewVisible:h,previewVisible:S,preview:s,previewProps:N}=q(e),g=Co(He,void 0),I=re("image"),R=D(),{isLoaded:K,isError:J,isLoading:Q,setLoadStatus:V}=Ue(),A=f(()=>({width:Te(i==null?void 0:i.value),height:Te(d==null?void 0:d.value)})),M=f(()=>e.fit?{objectFit:e.fit}:{}),$=f(()=>[`${I}`,{[`${I}-loading`]:Q.value,[`${I}-loading-error`]:J.value,[`${I}-with-footer-inner`]:K&&C&&b.value==="inner",[`${I}-with-footer-outer`]:K&&C&&b.value==="outer"},o.class]),u=f(()=>[A.value,o.style]),C=f(()=>n!=null&&n.value||m!=null&&m.value||t.extra?Io(v.value)?!v.value&&K.value:v.value==="never":!1),j=f(()=>Po(o,["class","style"])),[E,B]=we(h.value,G({value:S})),k=f(()=>!(g!=null&&g.preview)&&s.value);ye(()=>{ho||!R.value||(R.value.src=l==null?void 0:l.value,V("loading"))});const U=nt++;ye(Ce=>{var le,x,ce;const Y=(ce=g==null?void 0:g.registerImageUrl)==null?void 0:ce.call(g,U,((x=(le=N==null?void 0:N.value)==null?void 0:le.src)!=null?x:l==null?void 0:l.value)||"",s.value);Ce(()=>{Y==null||Y()})});function ae(){V("loaded")}function ve(){V("error")}function be(){s.value&&(g!=null&&g.preview?g.preview(U):(a("preview-visible-change",!0),B(!0)))}function _(){a("preview-visible-change",!1),B(!1)}return{t:r,refImg:R,prefixCls:I,wrapperClassNames:$,wrapperStyles:u,showFooter:C,imgProps:j,imgStyle:A,isLoaded:K,isError:J,isLoading:Q,mergedPreviewVisible:E,mergePreview:k,onImgLoaded:ae,onImgLoadError:ve,onImgClick:be,onPreviewClose:_,fitStyle:M}}}),at=["title","alt"];function lt(e,o,t,a,r,d){const i=L("IconImageClose"),v=L("IconLoading"),n=L("ImageFooter"),m=L("ImagePreview");return y(),P("div",{class:p(e.wrapperClassNames),style:ge(e.wrapperStyles)},[z("img",de({ref:"refImg",class:`${e.prefixCls}-img`},e.imgProps,{style:Me(Me({},e.imgStyle),e.fitStyle),title:e.title,alt:e.alt,onLoad:o[0]||(o[0]=(...l)=>e.onImgLoaded&&e.onImgLoaded(...l)),onError:o[1]||(o[1]=(...l)=>e.onImgLoadError&&e.onImgLoadError(...l)),onClick:o[2]||(o[2]=(...l)=>e.onImgClick&&e.onImgClick(...l))}),null,16,at),e.isLoaded?w("v-if",!0):(y(),P("div",{key:0,class:p(`${e.prefixCls}-overlay`)},[e.isError?F(e.$slots,"error",{key:0},()=>[z("div",{class:p(`${e.prefixCls}-error`)},[z("div",{class:p(`${e.prefixCls}-error-icon`)},[F(e.$slots,"error-icon",{},()=>[O(i)])],2),e.alt||e.description?(y(),P("div",{key:0,class:p(`${e.prefixCls}-error-alt`)},ue(e.alt||e.description),3)):w("v-if",!0)],2)]):w("v-if",!0),e.isLoading&&(e.showLoader||e.$slots.loader)?F(e.$slots,"loader",{key:1},()=>[z("div",{class:p([`${e.prefixCls}-loader`])},[z("div",{class:p(`${e.prefixCls}-loader-spin`)},[O(v),z("div",{class:p(`${e.prefixCls}-loader-spin-text`)},ue(e.t("image.loading")),3)],2)],2)]):w("v-if",!0)],2)),e.showFooter?(y(),te(n,{key:1,class:p(e.footerClass),"prefix-cls":e.prefixCls,title:e.title,description:e.description},Ge({_:2},[e.$slots.extra?{name:"extra",fn:H(()=>[F(e.$slots,"extra")])}:void 0]),1032,["class","prefix-cls","title","description"])):w("v-if",!0),e.isLoaded&&e.mergePreview?(y(),te(m,de({key:2,src:e.src},e.previewProps,{visible:e.mergedPreviewVisible,"render-to-body":e.renderToBody,onClose:e.onPreviewClose}),{actions:H(()=>[F(e.$slots,"preview-actions")]),_:3},16,["src","visible","render-to-body","onClose"])):w("v-if",!0)],6)}var he=ne(rt,[["render",lt]]),st=Z({name:"ImagePreviewGroup",components:{ImagePreview:ie},inheritAttrs:!1,props:{renderToBody:{type:Boolean,default:!0},srcList:{type:Array},current:{type:Number},defaultCurrent:{type:Number,default:0},infinite:{type:Boolean,default:!1},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},actionsLayout:{type:Array,default:()=>["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize"]},popupContainer:{type:[String,Object]}},emits:["change","update:current","visible-change","update:visible"],setup(e,{emit:o}){const{srcList:t,visible:a,defaultVisible:r,current:d,defaultCurrent:i,infinite:v}=q(e),[n,m]=we(r.value,G({value:a})),l=u=>{u!==n.value&&(o("visible-change",u),o("update:visible",u),m(u))},b=f(()=>new Map($o(t==null?void 0:t.value)?t==null?void 0:t.value.map((u,C)=>[C,{url:u,canPreview:!0}]):[])),h=D(new Map(b.value||[])),S=f(()=>Array.from(h.value.keys())),s=f(()=>S.value.length);function N(u,C,j){return b.value.has(u)||h.value.set(u,{url:C,canPreview:j}),function(){b.value.has(u)||h.value.delete(u)}}ke(b,()=>{h.value=new Map(b.value||[])});const[g,I]=we(i.value,G({value:d})),R=u=>{u!==g.value&&(o("change",u),o("update:current",u),I(u))},K=f(()=>S.value[g.value]),J=u=>{const C=S.value.indexOf(u);C!==g.value&&R(C)},Q=f(()=>{var u;return(u=h.value.get(K.value))==null?void 0:u.url});So(He,G({registerImageUrl:N,preview:u=>{l(!0),J(u)}}));const V=f(()=>{const u=(j,E)=>{var B;for(let k=j;k<=E;k++){const U=S.value[k];if((B=h.value.get(U))!=null&&B.canPreview)return k}},C=u(g.value+1,s.value-1);return X(C)&&v.value?u(0,g.value-1):C}),A=f(()=>{const u=(j,E)=>{var B;for(let k=j;k>=E;k--){const U=S.value[k];if((B=h.value.get(U))!=null&&B.canPreview)return k}},C=u(g.value-1,0);return X(C)&&v.value?u(s.value-1,g.value+1):C}),M=f(()=>X(A.value)?void 0:()=>{!X(A.value)&&R(A.value)}),$=f(()=>X(V.value)?void 0:()=>{!X(V.value)&&R(V.value)});return{mergedVisible:n,currentUrl:Q,prevIndex:A,nextIndex:V,onClose(){l(!1)},groupArrowProps:G({onPrev:M,onNext:$})}}}),it=Object.defineProperty,ut=Object.defineProperties,dt=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,De=(e,o,t)=>o in e?it(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,pt=(e,o)=>{for(var t in o||(o={}))vt.call(o,t)&&De(e,t,o[t]);if(Fe)for(var t of Fe(o))ct.call(o,t)&&De(e,t,o[t]);return e},ft=(e,o)=>ut(e,dt(o));function mt(e,o,t,a,r,d){const i=L("ImagePreview");return y(),P(Re,null,[F(e.$slots,"default"),O(i,de(ft(pt({},e.$attrs),{groupArrowProps:e.groupArrowProps}),{"in-group":"",src:e.currentUrl,visible:e.mergedVisible,"mask-closable":e.maskClosable,closable:e.closable,"actions-layout":e.actionsLayout,"popup-container":e.popupContainer,"render-to-body":e.renderToBody,onClose:e.onClose}),Ge({_:2},[e.$slots.actions?{name:"actions",fn:H(()=>[F(e.$slots,"actions",{url:e.currentUrl})])}:void 0]),1040,["src","visible","mask-closable","closable","actions-layout","popup-container","render-to-body","onClose"])],64)}var $e=ne(st,[["render",mt]]);const bt=Object.assign(he,{Preview:ie,PreviewGroup:$e,install:(e,o)=>{ko(e,o);const t=Lo(o);e.component(t+he.name,he),e.component(t+ie.name,ie),e.component(t+$e.name,$e),e.component(t+Se.name,Se)}});export{bt as I,$e as a};
